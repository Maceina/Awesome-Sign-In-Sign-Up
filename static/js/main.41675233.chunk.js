(this.webpackJsonpstarlink=this.webpackJsonpstarlink||[]).push([[0],{171:function(e,t,a){},330:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(6),r=a.n(i),c=(a(171),a(22)),o=a(23),l=a(27),d=a(29),u=a.p+"static/media/spacex_logo.ad25dfff.svg",h=a(5),j=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("img",{src:u,className:"App-logo",alt:"logo"}),Object(h.jsx)("p",{className:"title",children:"StarLink Tracker"})]})}}]),a}(n.Component),b=a(163),p=a(55),f=a(339),m=a(340),g=a(67),O=a.n(g),v="KSUGTE-KKHVE9-9SSVX7-4QBP",x=a(344),y=a(347),w=a(348),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).showSatellite=function(t){t.preventDefault(),e.props.form.validateFields((function(t,a){t||e.props.onShow(a)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return Object(h.jsxs)(x.a,Object(p.a)(Object(p.a)({},{labelCol:{xs:{span:24},sm:{span:11}},wrapperCol:{xs:{span:24},sm:{span:13}}}),{},{className:"sat-setting",onSubmit:this.showSatellite,children:[Object(h.jsx)(x.a.Item,{label:"Longitude (degrees)",children:e("longitude",{rules:[{required:!0,message:"Please enter your longitude"}]})(Object(h.jsx)(y.a,{min:-180,max:180,style:{width:"100%"},placeholder:"Enter longitude. e.g. '50'"}))}),Object(h.jsx)(x.a.Item,{label:"Latitude (degrees)",children:e("latitude",{rules:[{required:!0,message:"Please enter your latitude"}]})(Object(h.jsx)(y.a,{placeholder:"Enter latitude. e.g. '60'",min:-90,max:90,style:{width:"100%"}}))}),Object(h.jsx)(x.a.Item,{label:"Elevation (meters)",children:e("elevation",{rules:[{required:!0,message:"Please enter your elevation"}]})(Object(h.jsx)(y.a,{placeholder:"Enter elevation. e.g. '2000'",min:-413,max:8850,style:{width:"100%"}}))}),Object(h.jsx)(x.a.Item,{label:"Altitude (degrees)",children:e("altitude",{rules:[{required:!0,message:"Please enter your altitude"}]})(Object(h.jsx)(y.a,{placeholder:"Enter altitude. e.g. '80'",min:0,max:90,style:{width:"100%"}}))}),Object(h.jsx)(x.a.Item,{label:"Duration (secs)",children:e("duration",{rules:[{required:!0,message:"Please enter your duration"}]})(Object(h.jsx)(y.a,{placeholder:"Enter duration. e.g. '20'",min:0,max:90,style:{width:"100%"}}))}),Object(h.jsx)(x.a.Item,{className:"show-nearby",children:Object(h.jsx)(w.a,{type:"primary",htmlType:"submit",style:{textAlign:"center"},children:"Find Nearby Satellite"})})]}))}}]),a}(n.Component),L=x.a.create({name:"satellite-setting"})(S),k=a(155),D=a(342),N=a(349),I=a(337),C=a.p+"static/media/satellite.057df29c.svg",M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onChange=function(t){var a=t.target,n=a.dataInfo,s=a.checked,i=e.state.selected,r=e.addOrRemove(n,s,i);e.setState({selected:r})},e.addOrRemove=function(e,t,a){var n=a.some((function(t){return t.satid===e.satid}));return t&&!n&&a.push(e),!t&&n&&(a=a.filter((function(t){return t.satid!==e.satid}))),a},e.onShowSatMap=function(){e.props.onShowMap(e.state.selected)},e.state={selected:[],isLoad:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.satInfo?this.props.satInfo.above:[],a=this.props.isLoad,n=this.state.selected;return Object(h.jsxs)("div",{className:"sat-list-box",children:[Object(h.jsx)(w.a,{className:"sat-list-btn",size:"large",disabled:0===n.length,onClick:this.onShowSatMap,children:"Track on the map"}),Object(h.jsx)("hr",{}),a?Object(h.jsx)("div",{className:"spin-box",children:Object(h.jsx)(k.a,{tip:"Loading...",size:"large"})}):Object(h.jsx)(D.a,{className:"sat-list",itemLayout:"horizontal",size:"small",dataSource:t,renderItem:function(t){return Object(h.jsx)(D.a.Item,{actions:[Object(h.jsx)(N.a,{dataInfo:t,onChange:e.onChange})],children:Object(h.jsx)(D.a.Item.Meta,{avatar:Object(h.jsx)(I.a,{size:50,src:C}),title:Object(h.jsx)("p",{children:t.satname}),description:"Launch Date: ".concat(t.launchDate)})})}})]})}}]),a}(n.Component),P=a(162),E=a(343),T=a(350),A=a(346),F=a(341),z=a(352),B=a(351),q=a(345),K=960,R=600,H=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).track=function(t){if(!t[0].hasOwnProperty("positions"))throw new Error("no position data");var a=t[0].positions.length,n=(e.props.observerData.duration,e.map.context2),s=new Date,i=0,r=setInterval((function(){var c=new Date,o=0===i?0:c-s,l=new Date(s.getTime()+o);if(n.clearRect(0,0,K,R),n.font="bold 14px sans-serif",n.fillStyle="#333",n.textAlign="center",n.fillText(Object(q.a)(l),480,10),i>=a)return clearInterval(r),e.setState({isDrawing:!1}),void(document.getElementsByClassName("hint")[0].innerHTML="");t.forEach((function(t){var a=t.info,n=t.positions;e.drawSat(a,n[i])})),i+=60}),1e3)},e.drawSat=function(t,a){var n=a.satlongitude,s=a.satlatitude;if(n&&s){var i=t.satname.match(/\d+/g).join(""),r=e.map,c=r.projection,o=r.context2,l=c([n,s]);o.fillStyle=e.color(i),o.beginPath(),o.arc(l[0],l[1],4,0,2*Math.PI),o.fill(),o.font="bold 11px sans-serif",o.textAlign="center",o.fillText(i,l[0],l[1]+14)}},e.generateMap=function(t){var a=Object(E.a)().scale(170).translate([480,300]).precision(.1),n=Object(T.a)(),s=Object(F.a)(e.refMap.current).attr("width",K).attr("height",R),i=Object(F.a)(e.refTrack.current).attr("width",K).attr("height",R),r=s.node().getContext("2d"),c=i.node().getContext("2d"),o=Object(A.a)().projection(a).context(r);t.forEach((function(e){r.fillStyle="#B3DDEF",r.strokeStyle="#000",r.globalAlpha=.7,r.beginPath(),o(e),r.fill(),r.stroke(),r.strokeStyle="rgba(220, 220, 220, 0.1)",r.beginPath(),o(n()),r.lineWidth=.1,r.stroke(),r.beginPath(),r.lineWidth=.5,o(n.outline()),r.stroke()})),e.map={projection:a,graticule:n,context:r,context2:c}},e.state={isLoading:!1,isDrawing:!1},e.map=null,e.color=B.a(z.a),e.refMap=s.a.createRef(),e.refTrack=s.a.createRef(),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("https://unpkg.com/world-atlas@1/world/110m.json").then((function(t){var a=t.data,n=Object(P.a)(a,a.objects.countries).features;e.generateMap(n)})).catch((function(e){console.log("err in fetch map data ",e.message)}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(e.satData!==this.props.satData){var s=this.props.observerData,i=s.latitude,r=s.longitude,c=s.elevation,o=(s.altitude,60*s.duration);this.setState({isLoading:!0});var l=this.props.satData.map((function(e){var t=e.satid,a="/api/".concat("rest/v1/satellite/positions","/").concat(t,"/").concat(i,"/").concat(r,"/").concat(c,"/").concat(o,"/&apiKey=").concat(v);return O.a.get(a)}));Promise.all(l).then((function(e){var a=e.map((function(e){return e.data}));(n.setState({isLoading:!1,isDrawing:!0}),t.isDrawing)?document.getElementsByClassName("hint")[0].innerHTML="Please wait for these satellite animation to finish before selection new ones!":n.track(a)})).catch((function(e){console.log("err in fetch satellite position -> ",e.message)}))}}},{key:"render",value:function(){var e=this.state.isLoading;return Object(h.jsxs)("div",{className:"map-box",children:[e?Object(h.jsx)("div",{className:"spinner",children:Object(h.jsx)(k.a,{tip:"Loading...",size:"large"})}):null,Object(h.jsx)("canvas",{className:"map",ref:this.refMap}),Object(h.jsx)("canvas",{className:"track",ref:this.refTrack}),Object(h.jsx)("div",{className:"hint"})]})}}]),a}(n.Component),J=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).showMap=function(t){e.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{satList:Object(b.a)(t)})}))},e.showNearbySatellite=function(t){e.setState({isLoadingList:!0,setting:t}),e.fetchSatellite(t)},e.fetchSatellite=function(t){var a=t.latitude,n=t.longitude,s=t.elevation,i=t.altitude,r="/api/".concat("rest/v1/satellite/above","/").concat(a,"/").concat(n,"/").concat(s,"/").concat(i,"/").concat("52","/&apiKey=").concat(v);e.setState({isLoadingList:!0}),O.a.get(r).then((function(t){console.log(t.data),e.setState({satInfo:t.data,isLoadingList:!1})})).catch((function(e){console.log("err in fetch satellite -> ",e)}))},e.state={satInfo:null,satList:null,setting:null,isLoadingList:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoadingList,a=e.satInfo,n=e.satList,s=e.setting;return Object(h.jsxs)(f.a,{className:"main",children:[Object(h.jsxs)(m.a,{span:8,children:[Object(h.jsx)(L,{onShow:this.showNearbySatellite}),Object(h.jsx)(M,{isLoad:t,satInfo:a,onShowMap:this.showMap})]}),Object(h.jsx)(m.a,{span:16,className:"right-side",children:Object(h.jsx)(H,{satData:n,observerData:s})})]})}}]),a}(n.Component),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(h.jsx)("footer",{className:"footer",children:"\xa92021 StarLink Tracker by Audrius Maceina"})}}]),a}(n.Component);var V=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(j,{}),Object(h.jsx)(J,{}),Object(h.jsx)(U,{})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,353)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};r.a.render(Object(h.jsx)(V,{}),document.getElementById("root")),W()}},[[330,1,2]]]);
//# sourceMappingURL=main.41675233.chunk.js.map